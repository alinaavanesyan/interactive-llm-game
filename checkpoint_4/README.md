# Отчёт по Чекпоинту 4

## 1. Запуск приложения
Запуск нашего FastAPI-приложения:
```
python -m uvicorn app.main:app --reload
```

После этого сервер будет доступен по адресу: http://127.0.0.1:8000.
(мы сделали минимальный интерфейс, поэтому запрос forward можно отправлять через окно на сайте)

## 2. Примеры использования API

В терминале в одной вкладке запустить приложение, а в другой отправлять curl-запросы. Например:

```
curl -X POST "http://127.0.0.1:8000/forward" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "Why am I so sad?",
    "character": "CAROLYN"
  }'
```

```
curl -X GET "http://127.0.0.1:8000/history"
```
 
```
curl -X DELETE "http://127.0.0.1:8000/history" \
-H "X-Auth-Token: your_secure_token"
```
Данные админа находятся в файле *checkpoint_4/app/api/auth.py* в переменной ADMIN_DATA. Если данные человека (почта и пароль) не совпадают с админскими, то приложение запрещает человеку доступ к эндпоинтам удаления истории и к эндпоинту статистики.

Получить токен, если Вы администратор, можно следующей командой:

```
curl -X POST "http://127.0.0.1:8000/auth/login" \
-H "Content-Type: application/json" \
-d '{"email": "admin@example.com", "password": "admin123"}'
```

Сохраните аутпут и используйте внутри curl-запросов.

# Распределение обязанностей

| Участник        | Обязанности |
|-----------------|-------------|
| Мария Годунова  | Работа с основной логикой приложения: <br> - Эндпоинт `/forward` (POST) для обработки текста с сохранением истории запросов в БД <br> - Эндпоинт `/history` (GET) для получения истории запросов <br> - Эндпоинт `/history` (DELETE) для удаления истории запросов
| Алина Аванесян  | - Эндпоинт `stats` <br> - Миграции БД чере Alembic <br> - реализация JWT-авторизация и проверка прав администратора|
